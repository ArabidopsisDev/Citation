<UserControl x:Class="Citation.View.Page.DetailPage"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
			 xmlns:c="clr-namespace:Citation.Model.Convert"
             mc:Ignorable="d" 
             d:DesignHeight="600" d:DesignWidth="800">
	
	<UserControl.Resources>
		<c:AuthorConverter x:Key="AuthorsConverter"/>
		<c:DateConverter x:Key="DateConverter"/>
	</UserControl.Resources>
	
	<Grid Background="#F5F5F5">
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="*"/>
			<RowDefinition Height="50"/>
		</Grid.RowDefinitions>

		<!-- 标题部分 -->
		<TextBlock Grid.Row="0" 
                   HorizontalAlignment="Center" 
                   Margin="0,30,0,20" 
                   FontWeight="DemiBold" 
                   FontSize="30"
                   Text="引用详细信息"/>

		<!-- 详细信息内容 -->
		<Border Grid.Row="1" 
                VerticalAlignment="Top" 
                HorizontalAlignment="Center" 
                Width="700"
                Margin="0,0,0,20">
			<Border CornerRadius="15" 
                    BorderThickness="1" 
                    BorderBrush="LightGray" 
                    Background="White" 
                    Padding="25">
				<ScrollViewer VerticalScrollBarVisibility="Auto">
					<StackPanel>
						<!-- 标题 -->
						<TextBlock Text="标题:" FontWeight="Bold" Margin="0,5,0,2"/>
						<TextBox Text="{Binding Article.Message.Title[0]}" 
                                 FontSize="16" 
                                 Margin="0,0,0,15"
                                 BorderThickness="0,0,0,1"
                                 BorderBrush="LightGray"
                                 Padding="0,5"/>

						<!-- 作者 -->
						<TextBlock Text="作者:" FontWeight="Bold" Margin="0,5,0,2"/>
						<TextBox Text="{Binding Article.Message.Author, Converter={StaticResource AuthorsConverter}}" 
                                 FontSize="16" 
                                 Margin="0,0,0,15"
                                 BorderThickness="0,0,0,1"
                                 BorderBrush="LightGray"
                                 Padding="0,5"/>

						<!-- 期刊信息 -->
						<Grid Margin="0,0,0,15">
							<Grid.ColumnDefinitions>
								<ColumnDefinition Width="*"/>
								<ColumnDefinition Width="20"/>
								<ColumnDefinition Width="*"/>
							</Grid.ColumnDefinitions>
							<StackPanel Grid.Column="0">
								<TextBlock Text="期刊名称:" FontWeight="Bold" Margin="0,5,0,2"/>
								<TextBox Text="{Binding Article.Message.Container[0]}" 
                                         FontSize="16" 
                                         BorderThickness="0,0,0,1"
                                         BorderBrush="LightGray"
                                         Padding="0,5"/>
							</StackPanel>
							<StackPanel Grid.Column="2">
								<TextBlock Text="发表日期:" FontWeight="Bold" Margin="0,5,0,2"/>
								<DatePicker SelectedDate="{Binding Article.Message.Published, Converter={StaticResource DateConverter}}" 
                                            FontSize="16" 
                                            BorderThickness="0,0,0,1"
                                            BorderBrush="LightGray"
                                            Padding="0,5"/>
							</StackPanel>
						</Grid>

						<!-- 卷期页码 -->
						<Grid Margin="0,0,0,15">
							<Grid.ColumnDefinitions>
								<ColumnDefinition Width="*"/>
								<ColumnDefinition Width="20"/>
								<ColumnDefinition Width="*"/>
								<ColumnDefinition Width="20"/>
								<ColumnDefinition Width="*"/>
							</Grid.ColumnDefinitions>
							<StackPanel Grid.Column="0">
								<TextBlock Text="卷号:" FontWeight="Bold" Margin="0,5,0,2"/>
								<TextBox Text="{Binding Article.Message.Volume}" 
                                         FontSize="16" 
                                         BorderThickness="0,0,0,1"
                                         BorderBrush="LightGray"
                                         Padding="0,5"/>
							</StackPanel>
							<StackPanel Grid.Column="2">
								<TextBlock Text="期号:" FontWeight="Bold" Margin="0,5,0,2"/>
								<TextBox Text="{Binding Article.Message.Issue}" 
                                         FontSize="16" 
                                         BorderThickness="0,0,0,1"
                                         BorderBrush="LightGray"
                                         Padding="0,5"/>
							</StackPanel>
							<StackPanel Grid.Column="4">
								<TextBlock Text="页码:" FontWeight="Bold" Margin="0,5,0,2"/>
								<TextBox Text="{Binding Article.Message.Page}" 
                                         FontSize="16" 
                                         BorderThickness="0,0,0,1"
                                         BorderBrush="LightGray"
                                         Padding="0,5"/>
							</StackPanel>
						</Grid>

						<!-- DOI和URL -->
						<TextBlock Text="DOI:" FontWeight="Bold" Margin="0,5,0,2"/>
						<TextBox Text="{Binding Article.Message.Doi}" 
                                 FontSize="16" 
                                 Margin="0,0,0,15"
                                 BorderThickness="0,0,0,1"
                                 BorderBrush="LightGray"
                                 Padding="0,5"/>

						<TextBlock Text="URL:" FontWeight="Bold" Margin="0,5,0,2"/>
						<TextBox Text="{Binding Article.Message.Url}" 
                                 FontSize="16" 
                                 Margin="0,0,0,15"
                                 BorderThickness="0,0,0,1"
                                 BorderBrush="LightGray"
                                 Padding="0,5"/>

						<!-- 摘要 -->
						<TextBlock Text="摘要:" FontWeight="Bold" Margin="0,5,0,2"/>
						<TextBox Text="{Binding Article.Message.Abstract}" 
                                 FontSize="16" 
                                 MinHeight="100"
                                 AcceptsReturn="True"
                                 TextWrapping="Wrap"
                                 IsReadOnly="True"
                                 Background="#FAFAFA"
                                 BorderThickness="1"
                                 BorderBrush="LightGray"
                                 Padding="5"/>
					</StackPanel>
				</ScrollViewer>
			</Border>
		</Border>

		<!-- 操作按钮 -->
		<StackPanel Grid.Row="2" 
                   Orientation="Horizontal" 
                   HorizontalAlignment="Center" 
                   VerticalAlignment="Top">
			<Button Content="保存" 
                   Width="120" 
                   Height="40" 
                   FontSize="16" 
                   FontWeight="Medium" 
                   Background="#0078D7" 
                   Foreground="White"
                   BorderThickness="0" 
				   Click="SaveButton_Click"
                   Margin="0,0,20,0">
				<Button.Template>
					<ControlTemplate TargetType="Button">
						<Border x:Name="border" 
                                Background="{TemplateBinding Background}" 
                                CornerRadius="20" 
                                BorderThickness="0">
							<ContentPresenter x:Name="contentPresenter" 
                                            HorizontalAlignment="Center" 
                                            VerticalAlignment="Center"/>
						</Border>
					</ControlTemplate>
				</Button.Template>
			</Button>

			<Button Content="取消" 
                   Width="120" 
                   Height="40" 
                   FontSize="16" 
                   FontWeight="Medium" 
                   Background="LightGray" 
                   Foreground="Black"
                   BorderThickness="0">
				<Button.Template>
					<ControlTemplate TargetType="Button">
						<Border x:Name="border" 
                                Background="{TemplateBinding Background}" 
                                CornerRadius="20" 
                                BorderThickness="0">
							<ContentPresenter x:Name="contentPresenter" 
                                            HorizontalAlignment="Center" 
                                            VerticalAlignment="Center"/>
						</Border>
					</ControlTemplate>
				</Button.Template>
			</Button>
		</StackPanel>
	</Grid>
</UserControl>